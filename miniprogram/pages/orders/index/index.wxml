<!--pages/orders/index/index.wxml-->
<view class="container">
  <!-- ç»Ÿè®¡å¡ç‰‡ -->
  <view class="stats-card" wx:if="{{stats}}">
    <view class="stat-item">
      <text class="stat-value">{{stats.total}}</text>
      <text class="stat-label">æ€»è®¢å•</text>
    </view>
    <view class="stat-item">
      <text class="stat-value">Â¥{{stats.total_amount / 100}}</text>
      <text class="stat-label">æ€»é‡‘é¢</text>
    </view>
    <view class="stat-item">
      <text class="stat-value">{{stats.unpaid}}</text>
      <text class="stat-label">å¾…ä»˜æ¬¾</text>
    </view>
    <view class="stat-item">
      <text class="stat-value">{{stats.paid}}</text>
      <text class="stat-label">å·²ä»˜æ¬¾</text>
    </view>
  </view>

  <!-- è®¢å•åˆ—è¡¨ -->
  <view class="orders-section" wx:if="{{list.length > 0}}">
    <view class="section-header">
      <text class="section-title">è®¢å•å†å²</text>
    </view>
    <view class="order-list">
      <view class="order-item" wx:for="{{list}}" wx:key="_id" bindtap="goToDetail" data-id="{{item._id}}">
        <view class="order-header">
          <text class="order-title">{{item.title}}</text>
          <view class="order-status {{item.payment_status}}">
            <text>{{item.payment_status === 'paid' ? 'å·²ä»˜æ¬¾' : 'å¾…ä»˜æ¬¾'}}</text>
          </view>
        </view>
        <view class="order-info">
          <text class="order-date">{{formatTime(item.created_at)}}</text>
          <text class="order-count">{{item.order_count || 0}}äººå‚ä¸</text>
        </view>
        <view class="order-footer">
          <text class="order-amount">Â¥{{item.total_amount / 100}}</text>
          <text class="order-action">æŸ¥çœ‹è¯¦æƒ…</text>
        </view>
      </view>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-state" wx:if="{{list.length === 0 && !loading}}">
    <text class="empty-icon">ğŸ“„</text>
    <text class="empty-text">æš‚æ— è®¢å•</text>
    <text class="empty-hint">å‘èµ·ç‚¹é¤åä¼šç”Ÿæˆè®¢å•</text>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view class="loading" wx:if="{{loading}}">åŠ è½½ä¸­...</view>
</view>
