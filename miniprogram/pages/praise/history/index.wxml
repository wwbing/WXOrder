<!--pages/praise/history/index.wxml-->
<wxs module="utils">
  var formatTime = function(date) {
    if (!date) return ''
    var d = getDate(date)
    return d.getFullYear() + '-' + (d.getMonth() + 1) + '-' + d.getDate()
  }
  
  module.exports.formatTime = formatTime
</wxs>

<view class="praise-history-container">
  
  <!-- Header -->
  <view class="history-header">
    <view class="header-title">å½©è™¹å±å¢™</view>
    <view class="header-count">å…±æ”¶åˆ° {{praiseList.length}} æ¡å¤¸å¥–</view>
  </view>

  <!-- Praise List -->
  <scroll-view scroll-y class="praise-list" wx:if="{{praiseList.length > 0}}">
    <view class="praise-card" wx:for="{{praiseList}}" wx:key="_id">
      <!-- Rainbow decoration -->
      <view class="rainbow-bar"></view>
      
      <!-- Content -->
      <view class="praise-content">
        <text class="content-text">{{item.content}}</text>
      </view>

      <!-- Metadata -->
      <view class="praise-meta">
        <view class="meta-row">
          <text class="meta-label">æ¥è‡ª</text>
          <text class="meta-value">{{item.author}}</text>
        </view>
        <view class="meta-row">
          <text class="meta-label">èœå“</text>
          <text class="meta-value">{{item.dishes}}</text>
        </view>
        <view class="meta-row" wx:if="{{item.rating > 0}}">
          <text class="meta-label">è¯„åˆ†</text>
          <text class="meta-value">â­ {{item.rating}}/5</text>
        </view>
        <view class="meta-row">
          <text class="meta-label">æ—¶é—´</text>
          <text class="meta-value">{{utils.formatTime(item.createdAt)}}</text>
        </view>
      </view>
    </view>
  </scroll-view>

  <!-- Empty State -->
  <view wx:else class="empty-state">
    <text class="empty-icon">ğŸŒˆ</text>
    <text class="empty-text">è¿˜æ²¡æœ‰æ”¶åˆ°å½©è™¹å±</text>
    <text class="empty-hint">åšä¸€é¡¿å¥½åƒçš„é¥­èœå§~</text>
  </view>

</view>
